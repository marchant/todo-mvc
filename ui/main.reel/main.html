<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Main</title>

        <link rel="stylesheet" href="main.css">

        <script type="text/montage-serialization">
        {
            "owner": {
                "properties": {
                    "element": {"#": "mainComponent"}
                },
                "bindings": {
                    "classList.has('main-visible')": {
                        "<-": "@owner.todos.length > 0"
                    },
                    "classList.has('footer-visible')": {
                        "<-": "@owner.todos.length > 0"
                    },
                    "classList.has('clear-completed-visible')": {
                        "<-": "@owner.todosCompleted.length"
                    }
                    
                }
            },
            
            "newTodoField": {
                "prototype": "montage/ui/text-field.reel",
                "properties": {
                    "element": {"#": "newTodoField"}
                },
                "bindings": {
                    "value": {"<-": "@owner.todo.title"}
                },
                "listeners": [
                    {
                        "type": "action",
                        "listener": {"@": "owner"},
                        "capture": false
                    }
                ]
            },

            "todoRepetition": {
                "prototype": "montage/ui/repetition.reel",
                "properties": {
                    "element": {"#": "todo-list"}
                },
                "bindings": {
                    "contentController": {"<-": "@owner.todoListController"}
                }
            },

            "todoView": {
                "prototype": "ui/todo-view.reel",
                "properties": {
                    "element": {"#": "todoView"}
                },
                "bindings": {
                    "todo": {"<-": "@todoRepetition:iteration.object"}
                }
            },

            "toggleAllCheckbox": {
                "prototype": "montage/ui/checkbox.reel",
                "properties": {
                    "element": {"#": "toggle-all"}
                },
                "bindings": {
                    "checked": {"<->": "@owner.allCompleted"}
                }
            },

            "todoCount": {
                "prototype": "montage/ui/text.reel",
                "properties": {
                    "element": {"#": "todo-count"}
                },
                "bindings": {
                    "value": {
                        "<-": "@owner.todosLeft.length"
                    }
                }
            },

            "todoCountWording": {
                "prototype": "montage/ui/text.reel",
                "properties": {
                    "element": {"#": "todo-count-wording"}
                },
                "bindings": {
                    "value": {"<-": "@owner.todosLeft.length == 1 ? 'item' : 'items'"}
                }
            },

            "completedCount": {
                "prototype": "montage/ui/text.reel",
                "properties": {
                    "element": {"#": "completed-count"}
                },
                "bindings": {
                    "value": {
                        "<-": "@owner.todosCompleted.length"
                    }
                }
            },

            "clearCompletedButton": {
                "prototype": "montage/ui/button.reel",
                "properties": {
                    "element": {"#": "clear-completed"}
                },
                "listeners": [
                    {
                        "type": "action",
                        "listener": {"@": "owner"},
                        "capture": false
                    }
                ]
            }
        }
        </script>
    </head>
    <body>
        <div data-montage-id="mainComponent">

            <section id="todoapp">
                    <header id="header">
                        <h1>todos</h1>
                        <input data-montage-id="newTodoField" id="new-todo" class="new-todo" placeholder="What needs to be done?" autofocus>
                    </header>
                    <section data-montage-id="main" id="main">
                        <input data-montage-id="toggle-all" id="toggle-all" type="checkbox">
                        <label for="toggle-all">Mark all as complete</label>
                        <ul data-montage-id="todo-list" id="todo-list">
                            <li data-montage-id="todoView"></li>
                        </ul>
                    </section>
                    <footer data-montage-id="footer" id="footer">
                        <span id="todo-count"><strong data-montage-id="todo-count">0</strong> <span data-montage-id="todo-count-wording">items</span> left</span>
                        <div id="clear-completed-container">
                            <button data-montage-id="clear-completed" id="clear-completed">Clear completed (<span data-montage-id="completed-count">0</span>)</button>
                        </div>
                    </footer>
                </section>
                <footer id="info">
                    <p>Double-click to edit a todo</p>
                    <p>Created with <a href="http://github.com/montagejs/montage">Montage</a> </p>
                    <p>Source available at <a href="http://github.com/montagejs/todo-mvc">Montage-TodoMVC</a> </p>
                    <p>Part of <a href="http://todomvc.com">TodoMVC</a></p>
                </footer>
        </div>
    </body>
</html>
